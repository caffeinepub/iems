{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Build a fully functional browser-based online school management web application named IEMS with a cloud backend for real-time syncing, phone+OTP authentication, role-based access control, dashboards, attendance, homework, fees, and messaging with Undo support.",
  "architectural_notes": [
    "Browser-only web app with cloud backend providing real-time sync.",
    "Use role-based access control (Student/Parent, Teacher, Non-Teaching Staff, Chairperson).",
    "Phone number + OTP is the only authentication method; accounts permanently linked to phone numbers.",
    "Major user actions (profiles, attendance, homework, fees) must support Undo.",
    "Offline app open is allowed but syncing requires internet; no offline sync."
  ],
  "known_issues": [],
  "isFixRequest": false,
  "imageRequirements": "## Required Images\n- School crest-style logo with book and laurel, flat vector look, warm green + charcoal palette (iems-logo.dim_512x512.png)\n- Soft abstract school-themed header background with subtle stationery shapes, light paper texture (iems-header-bg.dim_1600x400.png)\n- Simple monochrome icon set (attendance checkmark, homework notebook, fees receipt, announcement megaphone) in a consistent line style (iems-icons.dim_256x256.png)",
  "existing_features": [
    {
      "id": "feature-create-an-opening-role-selection-screen-for-iems-with-exactly-three-options-student-parent-teacher-and-non-teaching-staff-after-selecting-a-role-route-the-user-to-a-phone-number-otp-login-screen-do-not-show-chairperson-on-the-role-selection-screen",
      "title": "Create an opening role-selection screen for IEMS with exactly three options: “Student / Parent”, “Teacher”, and “Non-Teaching Staff”. After selecting a role, route the user to a phone number + OTP login screen. Do not show “Chairperson” on the role-selection screen.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-phone-number-otp-only-authentication-flows-for-all-roles-including-a-direct-phone-otp-login-path-for-chairperson-not-via-role-selection-ensure-there-is-no-email-login-anywhere-accounts-must-be-permanently-linked-to-phone-numbers-on-first-successful-login-require-profile-completion-before-allowing-access-to-dashboards",
      "title": "Implement phone number + OTP-only authentication flows for all roles, including a direct phone+OTP login path for Chairperson (not via role selection). Ensure there is no email login anywhere. Accounts must be permanently linked to phone numbers. On first successful login, require profile completion before allowing access to dashboards.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-profile-data-model-and-ui-for-name-phone-number-and-address-or-location-profile-becomes-visible-after-first-login-post-completion-store-and-retrieve-profile-data-linked-to-the-authenticated-phone-number-add-an-undo-capability-for-profile-changes",
      "title": "Implement profile data model and UI for Name, Phone number, and Address or location. Profile becomes visible after first login (post-completion). Store and retrieve profile data linked to the authenticated phone number. Add an Undo capability for profile changes.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-teacher-class-assignment-data-needed-to-enforce-only-the-form-teacher-can-mark-attendance-and-teachers-can-mark-attendance-only-for-their-assigned-class-store-attendance-by-class-and-date-provide-attendance-marking-and-viewing-ui-per-role-and-add-undo-support-for-attendance-edits",
      "title": "Implement teacher/class assignment data needed to enforce: only the form teacher can mark attendance, and teachers can mark attendance only for their assigned class. Store attendance by class and date. Provide attendance marking and viewing UI per role, and add Undo support for attendance edits.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-fees-management-track-pending-paid-and-advance-fees-only-chairperson-can-approve-final-fee-changes-display-school-contact-and-chairperson-contact-in-the-fees-area-add-undo-support-for-fee-edits",
      "title": "Implement fees management: track pending, paid, and advance fees. Only Chairperson can approve final fee changes. Display school contact and chairperson contact in the fees area. Add Undo support for fee edits.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-messaging-announcements-with-a-notification-panel-chairperson-can-broadcast-announcements-to-all-users-or-selected-groups-teachers-can-send-notices-homework-alerts-to-students-messages-must-sync-instantly-via-automatic-refresh-across-sessions",
      "title": "Implement messaging & announcements with a notification panel: Chairperson can broadcast announcements to all users or selected groups; teachers can send notices/homework alerts to students. Messages must sync “instantly” via automatic refresh across sessions.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-create-role-specific-dashboards-student-parent-attendance-view-homework-list-printable-student-id-card-teacher-assigned-classes-list-attendance-marking-tools-homework-sending-tools-chairperson-full-school-overview-dashboard-fees-summary-all-users-list-non-teaching-staff-mostly-view-only-dashboard-and-assigned-notices-ensure-navigation-only-exposes-allowed-sections-for-the-logged-in-role",
      "title": "Create role-specific dashboards:\n- Student/Parent: attendance view, homework list, printable student ID card\n- Teacher: assigned classes list, attendance marking tools, homework sending tools\n- Chairperson: full school overview dashboard, fees summary, all users list\n- Non-Teaching Staff: mostly view-only dashboard and assigned notices\nEnsure navigation only exposes allowed sections for the logged-in role.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-enforce-online-only-syncing-behavior-the-app-may-open-offline-but-features-that-require-syncing-messaging-attendance-homework-fees-must-clearly-indicate-lack-of-connectivity-and-prevent-sync-actions-while-offline-when-connectivity-returns-the-app-should-resume-automatic-refresh",
      "title": "Enforce online-only syncing behavior: the app may open offline, but features that require syncing (messaging, attendance, homework, fees) must clearly indicate lack of connectivity and prevent sync actions while offline. When connectivity returns, the app should resume automatic refresh.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-coherent-school-friendly-visual-theme-colors-typography-spacing-component-styling-consistently-across-all-pages-and-dashboards-avoid-blue-purple-as-primary-brand-colors",
      "title": "Apply a coherent, school-friendly visual theme (colors, typography, spacing, component styling) consistently across all pages and dashboards. Avoid blue & purple as primary brand colors.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-add-generated-static-image-assets-for-iems-branding-and-use-them-in-the-ui-e-g-app-header-login-screens-by-serving-them-from-frontend-public-assets-generated-do-not-serve-generated-images-via-the-backend",
      "title": "Add generated static image assets for IEMS branding and use them in the UI (e.g., app header/login screens) by serving them from frontend/public/assets/generated (do not serve generated images via the backend).",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Opening screen with role selection (Student/Parent, Teacher, Non-Teaching Staff) then phone+OTP login; Chairperson excluded from role screen and logs in directly via OTP",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Phone number + OTP-only authentication with first-login profile completion; accounts permanently linked to phone numbers; no email login",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Role model and RBAC for Student, Teacher, Non-Teaching Staff (incl. drivers), and Chairperson (view-all, cannot edit user profiles); allow teachers to log into another teacher account via OTP if officially assigned",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "User profiles (name, phone, address/location) with self-edit only, visibility after first login, data linked to phone, and Undo for profile changes",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Attendance system: only form teacher can mark attendance for assigned class; stored by class and date; attendance edits support Undo",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Homework & academic updates: teachers send homework to their class; students/parents see instantly on dashboard; real-time sync; homework edits support Undo",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Fees management: track pending/paid/advance fees; only Chairperson approves final fee changes; display school contact and chairperson contact; fee edits support Undo",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Messaging & announcements: Chairperson broadcasts to all or groups; teachers send notices/homework alerts; instant sync; notification panel",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Role-specific dashboards: Student/Parent (attendance, homework, printable ID card), Teacher (classes, attendance tools, homework tools), Chairperson (school overview, fees summary, all users), Non-Teaching Staff (mostly view-only, assigned notices)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Technical requirements: web app only, cloud backend with real-time syncing, supports many concurrent users, secure RBAC, internet required for syncing (offline open allowed but no offline sync), simple school-friendly UI; backend collections like users/ attendance/ homework/ fees/ messages/",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Define role-based access control (RBAC) for: Student, Teacher, Non-Teaching Staff (including drivers), and Chairperson. Enforce that Chairperson can view everything but cannot edit user profiles. Enforce that users can edit only their own profile. Include a secure server-side authorization check for every backend mutation and restricted query.",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Implement homework/academic updates: teachers can create and send homework to their class; students/parents can view homework on their dashboard. Updates must sync “instantly” via automatic refresh, and homework edits must support Undo.",
      "reqIds": [
        "REQ-6"
      ],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Implement an app-wide Undo system for major actions (profile changes, attendance edits, homework edits, fee edits). Undo must restore the previous saved state and must be consistent across UI sections.",
      "reqIds": [
        "REQ-10"
      ],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Implement backend storage and APIs aligned to the requested logical collections: users, attendance, homework, fees, messages. Provide query methods needed to power each dashboard and mutation methods needed for each role’s permitted actions. Ensure the backend supports many users simultaneously within the single-actor design.",
      "reqIds": [
        "REQ-11"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "IEMS",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}